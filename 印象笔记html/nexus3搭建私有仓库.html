<html>
<head>
  <title>nexus3搭建私有仓库</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600480 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="675"/>
<h1>nexus3搭建私有仓库</h1>

<div>
<span><div><div>利用nexus作为私有仓库主要包含两部分：认证发布构建，指定远程仓库。把自己的maven工程发布到nexus上，同时也可以在使用时从nexus上获取刚刚发布的代码。</div><hr/><div><br/></div><div>1.nexus安装启动</div><ul><li><div>nexus下载后解压，然后cmd进入bin目录中,执行安装命令</div></li></ul><div><span style="font-family: &quot;PingFang SC&quot;;">            <span style="background-color: rgb(255, 250, 165); font-family: &quot;PingFang SC&quot;;-evernote-highlight:true;">nexus.exe/install</span></span><span style="font-family: &quot;PingFang SC&quot;;">  安装成功有命令提示  <span style="font-family: &quot;PingFang SC&quot;;">Installed service 'nexus'.</span></span></div><ul><li><div><span style="font-family: &quot;PingFang SC&quot;;">安装后执行开启服务命令</span></div></li></ul><div><span style="font-family: &quot;PingFang SC&quot;;">           <span style="background-color: rgb(255, 250, 165); font-family: &quot;PingFang SC&quot;;-evernote-highlight:true;"> nexus.exe/start</span></span><span style="font-family: &quot;PingFang SC&quot;;">   启动成功有命令提示  <span style="font-family: &quot;PingFang SC&quot;;">Starting service 'nexus'. 等待半分钟左右，即可在浏览器中访问，默认访问端口8081。关闭服务命令为 </span></span><span style="background-color: rgb(255, 250, 165); font-family: &quot;PingFang SC&quot;;-evernote-highlight:true;">nexus.exe/stop</span></div><ul><li><div><span style="font-family: &quot;PingFang SC&quot;;">浏览器访问</span></div></li></ul><div><span style="font-family: &quot;PingFang SC&quot;;">            127.0.0.1:8081，默认管理员登录用户名密码为admin,admin123</span></div><div>2.nexus配置</div><ul><li><div>浏览器界面，默认nexus已经提供了四个maven有关的仓库（以maven开头，还有三个以nuget开头的给.NET用的仓库，不做扩展了。。。），不同的仓库有不同的通途，我们知道maven中pom文件有一个version，通常有两个版本可以供选择：以RELEASE结尾的和以SNAPSHOT结尾的，例如引入的spring系列模块都是以RELEASE结尾，而我们自己新建的maven模块一般都是SNAPSHOT结尾的，在配置好分发结构<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">distributionManagement</span>和<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">nexus的认证连接</span>之后，不同仓库会根据模块Version来过滤，RELEASE仓库会接收RELEASE版本，SNAPSHOT会接收SNAPSHOT版本。如果代码里SNAPSHOT两种版本都有，但是分发结构<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">distributionManager</span>只配置了xxx/respository/maven-releases来接收，就会报错提示release无法接收snapshot版本。</div></li></ul><div>        （参考文档:   仓库比较：<a href="https://www.cnblogs.com/cnblog-long/p/6611383.html">https://www.cnblogs.com/cnblog-long/p/6611383.html</a>        mirror和repository比较<a href="https://blog.csdn.net/isea533/article/details/22437511">https://blog.csdn.net/isea533/article/details/22437511</a>   ）</div><ul><li><div>nexus提供的四个maven仓库如下：</div></li><ul><li><div>maven-central 中央仓库：maven中央库（即默认从<a href="https://repo1.maven.org/maven2/">https://repo1.maven.org/maven2/</a>拉取jar）</div></li><li><div><span style="font-weight: bold;">RELEASE 发布仓库：这里存放我们自己项目中发布的构建, 通常是Release版本的</span></div></li><li><div><span style="font-weight: bold;">SNAPSHOT 快照仓库：这个仓库让我们可以发布那些非release版本, 非稳定版本</span></div></li><li><div>maven-public：仓库分组，把上面三个仓库组合在一起对外提供服务，在本地maven基础配置settings.xml中使用。</div></li></ul></ul><div>3.maven发布到nexus</div><ul><li><div>构建发布。mvn deploy 用来将项目生成的构件分发到远程Maven仓库。本地Maven仓库的构件只能供当前用户使用，在分发到远程Maven仓库之后，所有能访问该仓库的用户都能使用你的构件。我们需要配置POM的distributionManagement来指定Maven分发构件的位置，如下：</div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">&lt;distributionManagement&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        &lt;repository&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            &lt;id&gt;nexus&lt;/id&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            &lt;name&gt;Releases&lt;/name&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            &lt;url&gt;</span><a href="http://127.0.0.1:8081/repository/maven-releases" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">http://127.0.0.1:8081/repository/</a><a href="http://127.0.0.1:8081/repository/maven-releases" style="font-family: Monaco;font-size: 9pt;color: rgb(51, 51, 51);background-color: rgb(255, 250, 165);-evernote-highlight:true;">maven-releases</a><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">&lt;/url&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        &lt;/repository&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        &lt;snapshotRepository&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            &lt;id&gt;nexus&lt;/id&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            &lt;name&gt;Snapshot&lt;/name&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            &lt;url&gt;</span><a href="http://127.0.0.1:8081/repository/maven-snapshots/" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">http://127.0.0.1:8081/repository/</a><a href="http://127.0.0.1:8081/repository/maven-snapshots/" style="font-family: Monaco;font-size: 9pt;color: rgb(51, 51, 51);background-color: rgb(255, 250, 165);-evernote-highlight:true;">maven-snapshots/</a><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">&lt;/url&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        &lt;/snapshotRepository&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    &lt;/distributionManagement&gt;</span></div></div><ul><li><div>setting.xml文件中进行相应配置。因为发布构建大部分都要认证，注意server的id要与distributionManager中的respository的id要一致</div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">&lt; settings &gt;    </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">   ...    </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">   &lt; servers &gt;    </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">     &lt; server &gt;    </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">       &lt; id &gt;nexus&lt;/ id &gt;    </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">       &lt; username &gt;admin&lt;/ username &gt;    </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">       &lt; password &gt;admin123&lt;/ password &gt;    </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">     &lt;/ server &gt;      </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">   &lt;/ servers &gt;    </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">   ...    </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">&lt;/ setting</span><span style="font-family: Monaco; font-size: 9pt;">s &gt;</span></div></div><div><br/></div><div><br/></div><div>4.引用nexus远程仓库</div><div>可以通过pom中配置远程仓库，也可以直接添加为镜像</div><div>注意指定的是public，因为public包含nexus提供的所有类型版本的仓库内容</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">&lt;mirror&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">...</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">      &lt;!--This sends everything else to /public --&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">      &lt;id&gt;nexus&lt;/id&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">      &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">      &lt;url&gt;</span><a href="http://localhost:8081/repository/maven-public/" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">http://localhost:8081/repository<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">/maven-public/</span></a><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">&lt;/url&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    &lt;/mirror&gt;</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div></div><div><br/></div><div><br/></div><div><br/></div><div>参考文档：</div><div><a href="https://blog.csdn.net/clj198606061111/article/details/52200928">https://blog.csdn.net/clj198606061111/article/details/52200928</a></div><div><br/></div><div><br/></div><div><br/></div><div>发布项目到nexus</div><div><a href="https://www.jianshu.com/p/dbeae430f29d">https://www.jianshu.com/p/dbeae430f29d</a></div><div><br/></div><div><br/></div><div><br/></div></div><div><br/></div></span>
</div></body></html> 