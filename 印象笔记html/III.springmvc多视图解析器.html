<html>
<head>
  <title>III.springmvc多视图解析器</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600480 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="502"/>
<h1>III.springmvc多视图解析器</h1>

<div>
<span><div> 在以上搭建基础上，开始设置多视图解析器，此处以html和jsp视图为例（在原有项目基础上添加了html视图解析）</div><div>1.pom.xml新增依赖如下：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt;"><font color="#000000" face="微软雅黑">&lt;dependency&gt;</font></span></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;groupId&gt;</span><span style="font-size: 9pt;">org.springframework</span><span style="font-size: 9pt;">&lt;/groupId&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;artifactId&gt;</span><span style="font-size: 9pt;">spring-context-support</span><span style="font-size: 9pt;">&lt;/artifactId&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;version&gt;</span><span style="font-size: 9pt;">4.0.4.RELEASE</span><span style="font-size: 9pt;">&lt;/version&gt;</span></font></div><div><span style="font-size: 9pt;"><font color="#000000" face="微软雅黑">&lt;/dependency&gt;</font></span></div><div>&lt;!--  只添加上方依赖会报错少jar包，因此添加jar包如下   --&gt;</div><div><span style="font-size: 9pt;"><font color="#000000" face="微软雅黑">&lt;dependency&gt;</font></span></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;groupId&gt;</span><span style="font-size: 9pt;">org.freemarker</span><span style="font-size: 9pt;">&lt;/groupId&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;artifactId&gt;</span><span style="font-size: 9pt;">freemarker</span><span style="font-size: 9pt;">&lt;/artifactId&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;version&gt;</span><span style="font-size: 9pt;">2.3.20</span><span style="font-size: 9pt;">&lt;/version&gt;</span></font></div><div><span style="font-size: 9pt;"><font color="#000000" face="微软雅黑">&lt;/dependency&gt;</font></span></div></div><div><br/></div><div>此时，项目展示（视图）结构如下：</div><div><img src="III.springmvc多视图解析器_files/CW$D(%V3Q2VDC7BB@8Y~ZP8.png" type="image/png" data-filename="CW$D(%V3Q2VDC7BB@8Y~ZP8.png" width="306"/></div><div><br/></div><div><br/></div><div><br/></div><div>2.springmvc-servlet.xml中调整如下：<br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;?</span><span style="font-size: 9pt;">xml version</span><span style="font-size: 9pt;">=&quot;1.0&quot;</span> <span style="font-size: 9pt;">encoding</span><span style="font-size: 9pt;">=&quot;UTF-8&quot;</span><span style="font-size: 9pt;">?&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;beans</span> <span style="font-size: 9pt;">xmlns</span><span style="font-size: 9pt;">=&quot;<a href="http://www.springframework.org/schema/beans" style="color: rgb(0, 0, 0);">http://www.springframework.org/schema/beans</a>&quot;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">xmlns:</span><span style="font-size: 9pt;">xsi</span><span style="font-size: 9pt;">=&quot;<a href="http://www.w3.org/2001/XMLSchema-instance" style="color: rgb(0, 0, 0);">http://www.w3.org/2001/XMLSchema-instance</a>&quot;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">xmlns:</span><span style="font-size: 9pt;">context</span><span style="font-size: 9pt;">=&quot;<a href="http://www.springframework.org/schema/context" style="color: rgb(0, 0, 0);">http://www.springframework.org/schema/context</a>&quot;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">xmlns:</span><span style="font-size: 9pt;">mvc</span><span style="font-size: 9pt;">=&quot;<a href="http://www.springframework.org/schema/mvc" style="color: rgb(0, 0, 0);">http://www.springframework.org/schema/mvc</a>&quot;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">xsi</span><span style="font-size: 9pt;">:schemaLocation</span><span style="font-size: 9pt;">=&quot;<a href="http://www.springframework.org/schema/beans" style="color: rgb(0, 0, 0);">http://www.springframework.org/schema/beans</a></span></font></div><div><span style="font-size: 9pt;"><a href="http://www.springframework.org/schema/beans/spring-beans.xsd"><font color="#000000" face="微软雅黑">http://www.springframework.org/schema/beans/spring-beans.xsd</font></a></span></div><div><span style="font-size: 9pt;"><a href="http://www.springframework.org/schema/context"><font color="#000000" face="微软雅黑">http://www.springframework.org/schema/context</font></a></span></div><div><span style="font-size: 9pt;"><a href="http://www.springframework.org/schema/context/spring-context.xsd"><font color="#000000" face="微软雅黑">http://www.springframework.org/schema/context/spring-context.xsd</font></a></span></div><div><span style="font-size: 9pt;"><a href="http://www.springframework.org/schema/mvc"><font color="#000000" face="微软雅黑">http://www.springframework.org/schema/mvc</font></a></span></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;"><a href="http://www.springframework.org/schema/mvc/spring-mvc.xsd" style="color: rgb(0, 0, 0);">http://www.springframework.org/schema/mvc/spring-mvc.xsd</a>&quot;</span><span style="font-size: 9pt;">&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><br style="font-size: 9pt;"/></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;!-- 配置扫描的包 --&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;</span><span style="font-size: 9pt;">context</span><span style="font-size: 9pt;">:component-scan</span> <span style="font-size: 9pt;">base-package</span><span style="font-size: 9pt;">=&quot;controller&quot;</span><span style="font-size: 9pt;">/&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><br style="font-size: 9pt;"/></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;!-- 注册HandlerMapper、HandlerAdapter两个映射类 --&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;</span><span style="font-size: 9pt;">mvc</span><span style="font-size: 9pt;">:annotation-driven/&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><br style="font-size: 9pt;"/></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;!-- 访问静态资源 --&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;</span><span style="font-size: 9pt;">mvc</span><span style="font-size: 9pt;">:default-servlet-handler/&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><br style="font-size: 9pt;"/></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;!--  视图解析器  --&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;bean</span> <span style="font-size: 9pt;">class</span><span style="font-size: 9pt;">=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span><span style="font-size: 9pt;">&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;property</span> <span style="font-size: 9pt;">name</span><span style="font-size: 9pt;">=&quot;prefix&quot;</span> <span style="font-size: 9pt;">value</span><span style="font-size: 9pt;">=&quot;/WEB-INF/view/jsp/&quot;</span><span style="font-size: 9pt;">/&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;property</span> <span style="font-size: 9pt;">name</span><span style="font-size: 9pt;">=&quot;suffix&quot;</span> <span style="font-size: 9pt;">value</span><span style="font-size: 9pt;">=&quot;.jsp&quot;</span><span style="font-size: 9pt;">/&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;property</span> <span style="font-size: 9pt;">name</span><span style="font-size: 9pt;">=&quot;order&quot;</span> <span style="font-size: 9pt;">value</span><span style="font-size: 9pt;">=&quot;1&quot;</span><span style="font-size: 9pt;">/&gt;</span></font></div><div><span style="font-size: 9pt;"><font color="#000000" face="微软雅黑">&lt;/bean&gt;</font></span></div><div><span style="font-size: 9pt;"><font color="#000000" face="微软雅黑">&lt;!--   html视图解析器  --&gt;</font></span></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;bean</span> <span style="font-size: 9pt;">id</span><span style="font-size: 9pt;">=&quot;freemarkerConfig&quot;</span> <span style="font-size: 9pt;">class</span><span style="font-size: 9pt;">=&quot;org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer&quot;</span><span style="font-size: 9pt;">&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;property</span> <span style="font-size: 9pt;">name</span><span style="font-size: 9pt;">=&quot;templateLoaderPath&quot;</span> <span style="font-size: 9pt;">value</span><span style="font-size: 9pt;">=&quot;/WEB-INF/view/html/&quot;</span> <span style="font-size: 9pt;">/&gt;</span></font></div><div><span style="font-size: 9pt;"><font color="#000000" face="微软雅黑">&lt;/bean&gt;</font></span></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;bean</span> <span style="font-size: 9pt;">id</span><span style="font-size: 9pt;">=&quot;htmlviewResolver&quot;</span> <span style="font-size: 9pt;">class</span><span style="font-size: 9pt;">=&quot;org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver&quot;</span><span style="font-size: 9pt;">&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;property</span> <span style="font-size: 9pt;">name</span><span style="font-size: 9pt;">=&quot;suffix&quot;</span> <span style="font-size: 9pt;">value</span><span style="font-size: 9pt;">=&quot;.html&quot;</span> <span style="font-size: 9pt;">/&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;property</span> <span style="font-size: 9pt;">name</span><span style="font-size: 9pt;">=&quot;order&quot;</span> <span style="font-size: 9pt;">value</span><span style="font-size: 9pt;">=&quot;0&quot;</span><span style="font-size: 9pt;">/&gt;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">&lt;property</span> <span style="font-size: 9pt;">name</span><span style="font-size: 9pt;">=&quot;contentType&quot;</span> <span style="font-size: 9pt;">value</span><span style="font-size: 9pt;">=&quot;text/html;charset=UTF-8&quot;</span><span style="font-size: 9pt;">/&gt;</span></font></div><div><span style="font-size: 9pt;"><font color="#000000" face="微软雅黑">&lt;/bean&gt;</font></span></div><div><span style="font-size: 9pt;"><font color="#000000" face="微软雅黑">&lt;/beans&gt;</font></span></div></div><div><br/></div><div>视图解析器根据order的值来确定执行顺序，值越小优先级越高，值得注意的是，jsp视图解析的order应为最大值，因为springmvc设置jsp视图解析总是最后执行。</div><div><br/></div><div>3.测试：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">package</span> <span style="font-size: 9pt;">controller</span><span style="font-size: 9pt;">;</span></font></div><div><font color="#000000" face="微软雅黑"><br style="font-size: 9pt;"/></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">import</span> <span style="font-size: 9pt;">org.springframework.beans.factory.annotation.</span><span style="font-size: 9pt;">Autowired</span><span style="font-size: 9pt;">;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">import</span> <span style="font-size: 9pt;">org.springframework.ui.Model</span><span style="font-size: 9pt;">;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">import</span> <span style="font-size: 9pt;">org.springframework.web.bind.annotation.</span><span style="font-size: 9pt;">RequestMapping</span><span style="font-size: 9pt;">;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">import</span> <span style="font-size: 9pt;">service.IService</span><span style="font-size: 9pt;">;</span></font></div><div><font color="#000000" face="微软雅黑"><br style="font-size: 9pt;"/></font></div><div><span style="font-size: 9pt;"><font color="#000000" face="微软雅黑">@org.springframework.stereotype.Controller</font></span></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">@RequestMapping</span><span style="font-size: 9pt;">(</span><span style="font-size: 9pt;">&quot;cc&quot;</span><span style="font-size: 9pt;">)</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">public class</span> <span style="font-size: 9pt;">Controller {</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;"><br/></span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">    @Autowired</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;">    IService</span> <span style="font-size: 9pt;">service</span><span style="font-size: 9pt;">;</span></font></div><div><font color="#000000" face="微软雅黑"><br style="font-size: 9pt;"/></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;"><span>    </span>@RequestMapping</span><span style="font-size: 9pt;">(</span><span style="font-size: 9pt;">&quot;q&quot;</span><span style="font-size: 9pt;">)</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;"><span>    </span>public</span> <span style="font-size: 9pt;">String</span> <span style="font-size: 9pt;">qcc</span><span style="font-size: 9pt;">(Model model){</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;"><span>     <span>      </span></span>service</span><span style="font-size: 9pt;">.print()</span><span style="font-size: 9pt;">;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;"><span>    <span>       </span></span>return </span><span style="font-size: 9pt;">&quot;main&quot;</span><span style="font-size: 9pt;">;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;"><span>    </span>}</span></font></div><div><font color="#000000" face="微软雅黑"><br style="font-size: 9pt;"/></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;"><span>    </span>@RequestMapping</span><span style="font-size: 9pt;">(</span><span style="font-size: 9pt;">&quot;qcc&quot;</span><span style="font-size: 9pt;">)</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;"><span>    </span>public </span><span style="font-size: 9pt;">String </span><span style="font-size: 9pt;">cc</span><span style="font-size: 9pt;">(Model model){</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;"><span>    </span><span>     </span>service</span><span style="font-size: 9pt;">.print()</span><span style="font-size: 9pt;">;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;"><span>     </span><span>    </span>return </span><span style="font-size: 9pt;">&quot;index&quot;</span><span style="font-size: 9pt;">;</span></font></div><div><font color="#000000" face="微软雅黑"><span style="font-size: 9pt;"><span>    </span>}</span></font></div><div><span style="font-size: 9pt;"><font color="#000000" face="微软雅黑">}</font></span></div></div><div><br/></div><div>当访问两个路由时，分别跳转到对应的界面。</div><div><br/></div><div><br/></div></span>
</div></body></html> 