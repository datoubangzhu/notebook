<html>
<head>
  <title>1.1线程基础</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600480 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="426"/>
<h1>1.1线程基础</h1>

<div>
<span><div>1.为何并发：</div><div>        为了充分利用cpu资源，允许多个线程同时运行，但是这样，多个线程在针对共享资源运行时可能会导致多线程问题，比如买票问题，就在共享资源的处理上进行了处理，比如加锁，使得多个线程在共享资源处理上，回归到单线程的运行状态，到了使用共享资源的状态时，通过比如锁控制，不允许其他线程抢占运行（切换）。</div><div>        以tomcat为例，在接收到会话请求时，会给每个请求创建一个线程，而在写的普通java代码中，大部分都是只考虑单线程运行的，没有考虑多个线程同时运行对共享资源的处理（少部分类考虑多线程并进行了处理如StringBuffer），所以，在多个线程同时运行时（例如多个用户登录操作），可能就会引发多线程问题。</div><div><br/></div><div><br/></div><div>2.java与多线程</div><div>        如上，java代码在处理多个请求会话同时进行的时候，才会体现出处理并发问题的必要性。但是一个人的时候并不能方便的模仿出多线程的效果。为此，java提供了处理多线程和实现多线程的相关类。</div><div><br/></div><div><br/></div><div>2.5线程状态</div><div>参考博客：<a href="https://blog.csdn.net/pange1991/article/details/53860651/">https://blog.csdn.net/pange1991/article/details/53860651/</a></div><div><br/></div><div><img src="1.1线程基础_files/CRAF2@6~A0T3B2EVQ{`2)XA.png" type="image/png" data-filename="CRAF2@6~A0T3B2EVQ{`2)XA.png"/></div><div>做题时遇到的，感觉总结的可以<a href="https://www.nowcoder.com/test/question/done?tid=19197591&amp;qid=112859#summary">https://www.nowcoder.com/test/question/done?tid=19197591&amp;qid=112859#summary</a></div><div><br/></div><div><img src="1.1线程基础_files/@OZM``GGV9}UJ(`2EQ6X6PW.png" type="image/png" data-filename="@OZM``GGV9}UJ(`2EQ6X6PW.png"/></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 250, 165); color: rgb(51, 51, 51); font-family: arial; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">需要注意的是,线程</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 250, 165); color: rgb(51, 51, 51); font-family: arial; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">只能从就绪</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 250, 165); color: rgb(51, 51, 51); font-family: arial; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">状态进入到运行</span><span style="font-size: 13px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 250, 165); color: rgb(51, 51, 51); font-family: arial; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-highlight:true;">状态。</span></span></div><div><br/></div><div>(1)sleep()和wait()的区别</div><div>sleep()是Thread类的方法，wait()是Object类的方法</div><div>sleep()方法导致了程序暂停执行指定的时间，让出cpu该其他线程，但是他的监控状态依然保持者，当指定的时间到了又会自动恢复运行状态。在调用sleep()方法的过程中，线程不会释放对象锁。</div><div>而当调用wait()方法的时候，线程会放弃对象锁，进入等待此对象的等待锁定池，只有针对此对象调用Object的notify()方法后本线程才进入对象锁定池准备获取对象锁进入运行状态。因此先等待，然后再获取锁</div><div>(2)join()与yield</div><div>join()方法的作用是调用线程等待该线程完成后,才能继续用下运行；</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>public static void main(String[] args) throws InterruptedException</div><div>{</div><div>        System.out.println(&quot;main start&quot;)</div><div>        Thread t1 = new Thread(new Worker(&quot;thread-1&quot;));</div><div>        t1.start();</div><div>        t1.join();</div><div>        System.out.println(&quot;main end&quot;);</div><div>}</div></div><div>在上面的例子中，main线程要等到t1线程运行结束后，才会输出“main end”。如果不加t1.join(),main线程和t1线程是并行的。而加上t1.join(),程序就变成是顺序执行了。</div><div><br/></div><div><br/></div><div>使当前线程从执行状态（运行状态）变为可执行态（就绪状态），用了yield方法之后，该线程就会把CPU时间让掉，让其他或者自己的线程执行，注意让掉是回归到可运行（就绪状态）。</div><div><br/></div><div><br/></div><div>3.多线程的实现方式：实现runnable接口、继承Thread类、使用执行器Executor 、实现Callable接口，</div><div>(1).继承Thread类，覆写run方法，然后执行new Thread().start();方法：</div><div>start方法去调用native方法start0，然后由jvm负责调用实现Runnable接口的实现类的run方法（多态），也就调用了继承Thread的类的run方法 </div><div>(2).实现runnable接口的类并不具备线程功能，它还需要作为Thread类的构造函数参数随着Thread类一起实例化才可以，然后在执行</div><div>        new Thread().start();   实现Runnable不具备返回值</div><div>(3) 实现Callable接口，类似于Runable接口，区别是有返回值</div><div>所以二者本质上，都是jvm调用了Runnable接口实现类（或实现类的子类）的run方法，继承Thread类是Runnable的子类，实现Runnable的类也是Runnable的实现类，有疑惑为什么实现Runnable接口之后还一定要放在经过Thread类呢，直接run为什么不行呢，因为Thread类的start方法调用的native方法start0才真正使得类具有了多线程特性。</div><div>并发模仿火车票售票案例（未解决并发带来的问题）：</div><div>a.继承Thread类的方式</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">package</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">demo;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">class</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">Ticket{</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">       </span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">//因为静态，类只初始化一次，所以每个类共享一份</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">private</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">int</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-style: italic;">a</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">= 100;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">//    private static Integer a = 100;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">    </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">void</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">sell() {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">while</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-style: italic;">a</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">&gt;0){</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">           </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">try</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">{</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">                Thread.</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; font-style: italic; color: rgb(127, 0, 85);">sleep</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">(10);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">            }</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">catch</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">(InterruptedException</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">e</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">                System.</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">out</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">.println(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(42, 0, 255); font-size: 10pt;">&quot; 捕获异常 &quot;</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">            }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">            System.</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">out</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">.println(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-style: italic;">a</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">           </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-style: italic;">a</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">--;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">        }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">    }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">}</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">public</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">class</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">MoreThreadTest</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">extends</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">  Thread{</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">       </span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">{</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">              System.</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">out</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">.println(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(42, 0, 255); font-size: 10pt;">&quot; 静态  ----&quot;</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">       }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">       Ticket</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt;">ticket</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">new</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">Ticket();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">       </span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(100, 100, 100); font-size: 10pt;">@Override</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">public</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">void</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">run(){</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">         </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt;">ticket</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">.sell();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">    }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">public</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">void</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; background: #d4d4d4; color: rgb(127, 0, 85);">main</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">(String[]</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">args</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">        MoreThreadTest</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">more1</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">new</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">MoreThreadTest();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">more1</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">.start();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">        MoreThreadTest</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">more2</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">new</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">MoreThreadTest();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">more2</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">.start();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">        MoreThreadTest</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">more3</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">new</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">MoreThreadTest();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">more3</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">.start();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">    }</span></div><div><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(127, 0, 85);">}</span></div></div><div><br/></div><div>b.实现Runnable的方式</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">package</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">demo;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">class</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">Ticket{</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">        //此处不要加static ， 因为Run类只创建一次，被重复使用了两次</span></div><div style="min-height: 11pt;">        <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">double</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-style: italic;">a</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">= 100d;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">void</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">sell() {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">      </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">while</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-style: italic;">a</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">&gt;0d){</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">          </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">try</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">{</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">               Thread.</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; font-style: italic; color: rgb(51, 51, 51);">sleep</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">(10);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           }</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">catch</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">(InterruptedException</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">e</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">               System.</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">out</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.println(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(42, 0, 255); font-size: 10pt;">&quot; 捕获异常 &quot;</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           System.</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">out</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.println(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-style: italic;">a</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">+</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(42, 0, 255); font-size: 10pt;">&quot;   &quot;</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">+Thread.</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; font-style: italic; color: rgb(51, 51, 51);">currentThread</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">());</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">          </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-style: italic;">a</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">--;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">//            while (true){</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">//             if(a&gt;0) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">//                        try {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">//                            Thread.sleep(10);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">//                        } catch (InterruptedException e) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">//                            System.out.println(&quot; 捕获异常 &quot;);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">//                        }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">//                        System.out.println(a);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">//                        a --;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">//             }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">//            }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">}</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">class</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">Run</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">implements</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">Runnable{</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">              Ticket</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt;">ticket</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">new</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">Ticket();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">              </span><span style="min-height: 11pt; font-family: Consolas; color: rgb(100, 100, 100); font-size: 10pt;">@Override</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">              </span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">public</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">void</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">run() {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">                     </span><span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt;">ticket</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.sell();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">              }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">}</span></div><div style="min-height: 11pt;"></div><div style="min-height: 11pt;"></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">public</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">class</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">MoreThreadTest2{  </span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">public</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">void</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">main(String[]</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">args</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">        Run</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">run</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">new</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">Run();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">        Thread</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t1</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">new</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">Thread(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">run</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">        Thread</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t2</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">new</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">Thread(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">run</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t1</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.start();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t2</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.start();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">    }</span></div><div><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">}</span></div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 