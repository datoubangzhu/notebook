<html>
<head>
  <title>Springboot配置和结构</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600480 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="539"/>
<h1>Springboot配置和结构</h1>

<div>
<span><div>0.springboot项目结构规范</div><div><br/></div><div><img src="Springboot配置和结构_files/AM@E`(ZHIRU}P2[M1]GV6`J.png" type="image/png" data-filename="AM@E`(ZHIRU}P2[M1]GV6`J.png"/></div><div><br/></div><div>1.注解扫描：</div><div>springboot默认的扫描包是xxxApplication那个启动类所在的包，是那个类上面的第一层包内的所有内容。可以通过</div><div>@ComponentScan(basePackages={&quot;com.example.xxx&quot;,&quot;com.example.xxx2&quot;})</div><div>来指定启动时扫描的包为xxx，此时将不再默认扫描xxxApplication启动类所在包，扫描的路径应从com.example下开始</div><div><br/></div><div>使用@Data注解（lomok），自动生成getset等方法，但是@Data注解并不能起到实例化类的作用</div><div>需添加依赖：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt;"><font color="#000000">&lt;dependency&gt;</font></span></div><div><font color="#000000"><span style="font-family: Monaco; font-size: 9pt;">&lt;groupId&gt;</span><span style="font-family: Monaco; font-size: 9pt;">org.projectlombok</span><span style="font-family: Monaco; font-size: 9pt;">&lt;/groupId&gt;</span></font></div><div><font color="#000000"><span style="font-family: Monaco; font-size: 9pt;">&lt;artifactId&gt;</span><span style="font-family: Monaco; font-size: 9pt;">lombok</span><span style="font-family: Monaco; font-size: 9pt;">&lt;/artifactId&gt;</span></font></div><div><font color="#000000"><span style="font-family: Monaco; font-size: 9pt;">&lt;version&gt;</span><span style="font-family: Monaco; font-size: 9pt;">1.16.10</span><span style="font-family: Monaco; font-size: 9pt;">&lt;/version&gt;</span></font></div><div><span style="font-family: Monaco; font-size: 9pt;"><font color="#000000">&lt;/dependency&gt;</font></span></div></div><div><br/></div><div><br/></div><div><br/></div><div>2.返回视图：</div><div>控制层中如果不返回视图（页面），那么应该使用@RestController而不是@Controller</div><div><br/></div><div><br/></div><div><br/></div><div>3.通过application.properties配置：</div><div>springboot配置文件application.properties常用配置：（博客罗列的比较详细  <a href="https://blog.csdn.net/true_hsf/article/details/77893481">https://blog.csdn.net/true_hsf/article/details/77893481</a>）</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font color="#000000">server.port=8000                    修改tomcat端口为8000</font></div><div><font color="#000000">server.servlet.context-path=/springbootdemo     </font></div><div><font color="#000000">                                    修改项目访问路径加入springbootdemo，例如http:localhost:80000/springbootdemo</font></div><div>logging.level.root=debug            修改项目日志输出级别为debug，默认为INFO级别</div></div><div>配置的数据可以通过在bean字段上加入@Value(&quot;${server.port}&quot;)，为bean字段设置启动后的默认值</div><div><br/></div><div><br/></div><div><br/></div><div>4.日志基本配置：</div><div>springboot自带slf4j，Logback日志，同时默认输出info级别的日志，如果需要输出文件或者更改日志输出级别，则可以在application.properties中进行配置</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="color: rgb(0, 0, 0);"><a href="http://logging.level.org.springframework.web=/" style="color: rgb(0, 0, 0);">logging.level.org.springframework.web=</a> debug</font></div><div><font color="#000000">logging.file= F:/mylog/log.log</font></div></div><div>实测，日志的地址和文件名要表示在一起，已踩坑，<span style="font-weight: bold;">下面这样的配置无法生成对应的日志文件</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>#<a href="http://logging.level.org.springframework.web=/" style="color: rgb(0, 0, 0); font-family: Monaco; font-size: 9pt;">logging.level.org.springframework.web=</a> <span style="color: #000000; font-family: Monaco; font-size: 9pt;">debug</span></div><div>#logging.path= F:/mylog</div><div>#logging.file= log.log</div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div>4.通过application.yaml配置：</div><div>添加使用properties.yaml的依赖</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;dependency&gt;</div><div>   &lt;groupId&gt;org.yaml&lt;/groupId&gt;</div><div>   &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;</div><div>   &lt;version&gt;1.18&lt;/version&gt;</div><div>&lt;/dependency&gt;</div></div><div><br/></div><div>可以通过@ConfigurationProperties( prefix=&quot;xxx&quot;)来为类添加属性值。</div><div>例如properties.yaml文件中配置了：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: #cc7832; font-weight: bold; font-family: Monaco; font-size: 9pt;">xxx:</span></div><div><span style="color: #cc7832; font-weight: bold; font-family: Monaco; font-size: 9pt;">    name:</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">firstFly</span></div><div><span style="color: #cc7832; font-weight: bold; font-family: Monaco; font-size: 9pt;">    port:</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">66666</span></div><div><span style="color: #cc7832; font-weight: bold; font-family: Monaco; font-size: 9pt;">    num:</span> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">100</span></div></div><div>就会在springboot启动后自动向类的name，port，num属性（存在的前提下）附上指定值。</div><div><br/></div><div><br/></div><div><br/></div><div>5.通过@Value进行注解</div><div>@Value(&quot;xxx&quot;)</div><div>@Value(&quot;${configname}&quot;)   //用来读取properties配置文件的内容，注意配置文件中配置的key值不要与自带的名称重复，否则会报错</div><div>用在类的属性上，当这个类被扫描实例化的时候，value中的值会自动赋给此属性</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div>5.html文件</div><div>html默认放在static目录下，如果放在template下将无法访问到</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div>6.更改banner，在resources目录下建一个文件banner.txt然后把要展示的启动图案粘贴过去就可以了。</div><div><br/></div><div><br/></div></span>
</div></body></html> 